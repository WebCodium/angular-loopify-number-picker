!function(){"use strict";var e=angular.module("loopify.ui.numberPicker",["loopify.ui.numberPicker.templates"]);e.directive("loopifyNumberPicker",["numberPickerService",function(e){var n={min:0,max:1/0,step:1,enter:!1,percent:!1,label:void 0,methodRound:void 0},r={restrict:"E",scope:{value:"=",min:"@",max:"@",step:"@",enter:"@",percent:"@",label:"@",methodRound:"@"}};return angular.extend(r,{link:function(r){var t=e.assignExtend(r,n);if(!e.checkNumber([t.min,t.max,t.step]))throw new Error("some value: (min, max or step) is not a valid number");r.percent&&(r.percentLabel="%",r.isPercent=!0),r.id=e.getId(),e.transform(t),t.min>r.value&&(r.value=t.min),t.max<r.value&&(r.value=t.max),r.incrementValue=function(){r.value>=(r.isPercent?100:t.max)||(r.value+=t.step)},r.decrementValue=function(){r.value<=(r.isPercent?0:t.min)||(r.value-=t.step)},r.togglePercentageValue=function(){r.isPercent=!r.isPercent,r.isPercent?r.percentLabel="%":r.percentLabel=r.label},r.$watch("value",function(n,i){var a=r.isPercent?0:t.min,u=r.isPercent?100:t.max;r.canDown=n>a,r.canUp=u>n,r.isMaxValue=!r.canUp,r.isMinValue=!r.canDown,(!e.checkNumber(n)||n>u||a>n)&&(r.value=e.checkNumber(i)?i:t.min)}),r.$watch("percentLabel",function(e,n){return e||n?void(r.isPercent?r.value=r.methodRound?Math[r.methodRound](r.value/t.max*100):r.value/t.max*100:r.value=r.methodRound?Math[r.methodRound](t.max*r.value/100):t.max*r.value/100):!1})},templateUrl:"templates/numberPicker.html"})}]),e.service("numberPickerService",function(){return{index:0,assignExtend:function(e,n){var r={};for(var t in n)e[t]?r[t]=e[t]:(r[t]=n[t],e[t]=n[t]);return r},isNumber:function(e){var n=Number(e);return!isNaN(n)&&n===+e},toNumber:function(e){return Number(e)},checkNumber:function(e){var n=this,r=0;return angular.isArray(e)?(angular.forEach(e,function(e){n.isNumber(e)||(r+=1)}),r>0?!1:!0):this.isNumber(e)?!0:!1},transform:function(e){for(var n in e)e[n]=this.toNumber(e[n])},getId:function(){return this.index+=1,"number-picker-"+this.index}}})}();